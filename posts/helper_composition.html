<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="TypeScript, JavaScript, Helper Functions, Composition, Software Design, Programming, Coding, Web Development, Beginners, Tutorial, Guide">
    <meta name="author" content="Reza Owliaei">
    <meta name="description" content="Master the fundamentals of explicit code structure in TypeScript by exploring helper functions and composition patterns as robust alternatives to decorators.">
    <title>Beyond the Magic: A Beginner’s Guide to Helper Functions and Composition</title>
    
    <!-- Prism.js CSS for Syntax Highlighting (Tomorrow Night theme for dark mode) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    
    <style>
        /* UPDATED: Google Sans Flex Font */
        @import url('https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wght@6..144,1..1000&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap');

        :root {
            /* UPDATED: Requested Color Palette */
            --bg: #1d1d1d;       /* Darkest - Background */
            --panel: #3a3a3a;    /* Dark - Cards/Panels */
            --border: #575757;   /* Mid - Borders */
            --muted: #747474;    /* Light - Muted Text */
            --text: #e1e1e1;     /* Lightest - Main Text (using lighter than #919191 for readability) */
            --accent: #919191;   /* Palette Lightest - Accents */
            
            --code-bg: #151515;  /* Slightly darker than bg for contrast */
            --pill-bg: rgba(145, 145, 145, 0.15);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            min-height: 100vh;
            /* UPDATED: Monochrome Gradients */
            background:
                radial-gradient(circle at 15% 20%, rgba(145, 145, 145, 0.08), transparent 28%),
                radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.03), transparent 30%),
                radial-gradient(circle at 60% 70%, rgba(145, 145, 145, 0.05), transparent 35%),
                var(--bg);
            color: var(--text);
            /* UPDATED: Font Family */
            font-family: 'Google Sans Flex', system-ui, -apple-system, sans-serif;
            line-height: 1.7;
            display: flex;
            justify-content: center;
            padding: 48px 18px 56px;
        }

        .page {
            width: min(960px, 100%);
        }

        .post__header {
            margin-bottom: 1.5rem;
        }

        h1, h2, h3, h4 {
            color: #ffffff; /* Keeping headers stark white for contrast */
            margin: 0 0 0.65rem;
            letter-spacing: -0.02em; /* Tighter tracking for Sans Flex */
        }

        h1 {
            font-size: clamp(2.1rem, 2.6vw + 1.4rem, 2.8rem);
            font-weight: 600;
            line-height: 1.1;
        }

        h2 {
            font-size: 1.6rem;
            font-weight: 500;
            padding-bottom: 0.35rem;
            border-bottom: 1px solid var(--border);
        }

        h3 {
            font-size: 1.3rem;
            color: var(--accent);
            font-weight: 500;
        }

        h4 {
            font-size: 1.1rem;
            color: var(--text);
            font-weight: 500;
        }

        p {
            margin: 0 0 1rem;
            color: var(--text);
        }

        .summary {
            color: var(--muted);
            font-weight: 400;
            margin: 0.5rem 0 0;
            font-size: 1.1rem;
        }

        .eyebrow {
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--muted);
            margin: 0 0 0.35rem;
            font-weight: 600;
        }

        .meta {
            display: flex;
            gap: 0.6rem;
            flex-wrap: wrap;
            margin: 0.65rem 0 1rem;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            background: var(--pill-bg);
            color: var(--text);
            font-size: 0.95rem;
            border: 1px solid var(--border);
            font-weight: 500;
        }

        ul, ol {
            margin: 0 0 1rem 1.25rem;
            padding: 0;
        }

        li + li {
            margin-top: 0.35rem;
        }

        :not(pre) > code {
            font-family: 'IBM Plex Mono', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 6px;
            color: #fff;
            font-size: 0.9em;
        }

        /* --- Editor Code Block Styling --- */
        
        pre[class*="language-"] {
            background: var(--code-bg) !important;
            margin: 1.5rem 0 2rem !important;
            padding: 3rem 1.5rem 1.5rem !important;
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: visible;
        }

        pre[class*="language-"]::before {
            content: "TypeScript";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 36px;
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--border);
            color: var(--muted);
            font-family: 'Google Sans Flex', sans-serif;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: flex;
            align-items: center;
            padding-left: 1.25rem;
            z-index: 10;
        }
        
        pre[class*="language-"]::after {
            content: "";
            position: absolute;
            top: 13px;
            right: 1.25rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--border);
            box-shadow: -18px 0 0 var(--border), -36px 0 0 var(--border); 
            opacity: 0.5;
            z-index: 11;
        }

        code[class*="language-"] {
            font-family: 'IBM Plex Mono', monospace !important;
            font-size: 0.95rem;
            line-height: 1.6;
            text-shadow: none !important;
        }

        pre[class*="language-"]::-webkit-scrollbar {
            height: 8px;
        }
        pre[class*="language-"]::-webkit-scrollbar-thumb {
            background: var(--border); 
            border-radius: 4px;
        }
        pre[class*="language-"]::-webkit-scrollbar-track {
            background: transparent;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            color: var(--muted);
            font-weight: 600;
            letter-spacing: 0.02em;
            background: rgba(255,255,255,0.02);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) td {
            background: rgba(255, 255, 255, 0.02);
        }

        .section {
            margin-top: 2.5rem;
        }

        .table-wrapper {
            margin-top: 1rem;
            overflow-x: auto;
        }

        @media (max-width: 720px) {
            body {
                padding: 32px 14px 40px;
            }

            .post {
                padding: 26px;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <main class="page">
        <!-- Navigation -->
        <nav style="margin-bottom: 2rem;">
            <a href="../index.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--muted); font-size: 0.95rem; text-decoration: none; transition: color 0.2s ease;">
                <span>←</span>
                <span>Back to Home</span>
            </a>
        </nav>
        
        <article class="post" id="article-content">
            <header class="post__header">
                <p class="eyebrow">TypeScript · Dec 11, 2025</p>
                <h1>Beyond the Magic: A Beginner’s Guide to Helper Functions and Composition</h1>
                <div class="meta">
                    <span class="pill">TypeScript</span>
                    <span class="pill">Clean Code</span>
                    <span class="pill">Helper Functions</span>
                    <span class="pill">Object Composition</span>
                    <span class="pill">Class Composition</span>
                </div>
                <p class="summary">Master the fundamentals of explicit code structure in TypeScript by exploring helper functions and composition patterns as robust alternatives to decorators.</p>
            </header>

            <section class="section">
                <p>In the world of TypeScript, features like Decorators can automate tasks behind the scenes. While powerful, this "magic" can sometimes be difficult to understand. When things break, the lack of visibility makes debugging harder.</p>
                <p>If you want to write code that is easy to read, easy to fix, and easy to explain to others, mastering the fundamentals is essential. Today, we are exploring two powerful alternatives to implicit logic: <strong>Helper Functions</strong> and <strong>Composition</strong>.</p>
            </section>

            <section class="section">
                <h2>1. Helper Functions: The Art of Explicitness</h2>
                <p>A standard Decorator acts automatically—it modifies behavior simply by being attached to a method. While convenient, it can obscure what is actually happening.</p>
                <p>A <strong>Helper Function</strong>, by contrast, is explicit. It only runs when you call it. This gives you full control over <em>when</em> and <em>how</em> logic is applied.</p>

                <h3>Why is this better for beginners?</h3>
                <ul>
                    <li><strong>No Surprises:</strong> You can see exactly where the function is called in the code.</li>
                    <li><strong>Easy to Trace:</strong> You don't have to guess how a result was calculated. You can simply look at the line of code and follow the execution path.</li>
                </ul>

                <h3>The Example: Validation</h3>
                <p>In this example, instead of hiding validation rules inside a complex system or decorator, we create a standalone function called <code>isValidEmail</code>. It has a single responsibility: checking if an email string is formatted correctly.</p>
                <p>Inside our <code>UserService</code>, we manually call this function.</p>
                
                <div class="code-wrapper">
                    <pre><code class="language-typescript" id="code-1">// THE HELPER FUNCTION
// It takes a string and returns true or false. Simple.
function isValidEmail(email: string): boolean {
  // A standard pattern (Regex) to check for an @ symbol and a dot.
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
}

class UserService {
  registerUser(email: string, name: string): void {
    
    // THE EXPLICIT CHECK
    // We call the helper right here. If it fails, we stop.
    // There is no ambiguity—you can see exactly why the error would be thrown.
    if (!isValidEmail(email)) {
      throw new Error("Invalid email format.");
    }
    
    // ... proceed with registration logic ...
    console.log(`User ${name} registered with email ${email}`);
  }
}

const service = new UserService();
// This works perfectly
service.registerUser("test@example.com", "Narges"); 

// This will crash with "Invalid email format."
// service.registerUser("invalid-email", "Charlie"); 
</code></pre>
                </div>

                <p><strong>Key Takeaway:</strong> By using a helper function, the dependency is clear. Anyone reading <code>registerUser</code> immediately understands that the method relies on <code>isValidEmail</code> for validation.</p>
            </section>

            <section class="section">
                <h2>2. Composition: Modular Software Design</h2>
                <p>Composition is the practice of combining simple, independent units of code to build more complex behavior. Rather than writing a massive, monolithic function, you build your system using smaller, reusable components.</p>
                <p>In coding, we use Composition to wrap simple logic inside other functions to extend their capabilities (such as adding logging or caching) without modifying the original code.</p>

                <h3>Technique A: Function Composition (Higher-Order Functions)</h3>
                <p>This technique involves creating a "wrapper" function.</p>
                <ol>
                    <li><strong>The Core Function:</strong> Performs the actual business logic (e.g., a calculation).</li>
                    <li><strong>The Wrapper Function:</strong> Accepts the core function as an argument, adds extra behavior (like logging), and returns a new function.</li>
                </ol>

                <h4>The Example: Logging</h4>
                <p>We want to log every time a function is called. Instead of writing <code>console.log</code> inside every single function, we create a generic wrapper called <code>withLogging</code>.</p>
                
                <div class="code-wrapper">
                    <pre><code class="language-typescript" id="code-2">// THE WRAPPER
// It accepts a function 'fn' as input and returns a NEW function.
function withLogging&lt;Args extends any[], Return&gt;(fn: (...args: Args) =&gt; Return) {
  
  // This is the new function that replaces the old one
  return function (...args: Args): Return {
    console.log(`Calling ${fn.name} with args:`, args); // 1. Do the logging
    const result = fn(...args);                         // 2. Run the original function
    console.log(`${fn.name} returned:`, result);        // 3. Log the result
    return result;                                      // 4. Return the result
  };
}

// THE CORE LOGIC
// This function strictly performs the calculation.
function calculateDiscountedPrice(price: number, discount: number): number {
  return price * (1 - discount);
}

// COMBINE THEM
// We create a new function by wrapping the core logic with the logger.
const calculatePriceWithLog = withLogging(calculateDiscountedPrice);

// Usage
calculatePriceWithLog(100, 0.10); 
</code></pre>

                </div>

                <p><strong>Key Takeaway:</strong> <code>calculateDiscountedPrice</code> remains pure. If you need to remove logging later, you simply stop using <code>withLogging</code>. You do not need to edit the calculation logic itself.</p>

                <h3>Technique B: Object Composition (The Proxy Pattern)</h3>
                <p>This approach is used for Classes. It involves creating a wrapper class that looks identical to the original class but sits between the caller and the real service.</p>
                <ol>
                    <li><strong>The Real Service:</strong> Performs the actual operation (e.g., fetching data).</li>
                    <li><strong>The Intermediary (Wrapper):</strong> Intercepts the call. It can decide to return data immediately (from a cache) or forward the request to the Real Service.</li>
                </ol>

                <h4>The Example: Caching</h4>
                <p>We use an <code>interface</code> to ensure both the Real Service and the Caching Wrapper adhere to the same contract.</p>
                
                <div class="code-wrapper">
                    <pre><code class="language-typescript" id="code-3">// THE CONTRACT
// Both the Real service and the Caching wrapper must follow these rules.
interface DataService {
    fetchData(id: number): Promise&lt;string&gt;;
}

// THE REAL WORKER
// It handles the resource-intensive work (fetching from an API).
class RealDataService implements DataService {
    async fetchData(id: number): Promise&lt;string&gt; {
        // ... actual API call logic ...
        return `Data for ${id} from API`;
    }
}

// THE WRAPPER (Intermediary)
class CachingDataService implements DataService {
    private cache: Map&lt;number, string&gt; = new Map();

    // COMPOSITION HAPPENS HERE:
    // The CachingService "has a" RealDataService inside it.
    // It takes the real service as a parameter in the constructor.
    constructor(private innerService: DataService) {}

    async fetchData(id: number): Promise&lt;string&gt; {
        // 1. Check if we already have the data locally
        if (this.cache.has(id)) {
            console.log(`Fetching ${id} from cache`);
            return this.cache.get(id)!;
        }
        
        // 2. If not, request it from the Real Service
        console.log(`Fetching ${id} from real service`);
        const data = await this.innerService.fetchData(id);
        
        // 3. Save the result for future requests
        this.cache.set(id, data);
        return data;
    }
}

// Usage:
const realService = new RealDataService();
// We wrap the real service inside the caching service
const cachedService = new CachingDataService(realService);

cachedService.fetchData(1); // Goes to API, then caches
cachedService.fetchData(1); // Second time: Returns directly from CachingDataService
</code></pre>
                </div>

                <p><strong>Key Takeaway:</strong> This is powerful because <code>RealDataService</code> does not need to contain any caching logic. You can stack multiple layers—Caching, Logging, and Error Handling—without ever modifying the core API client.</p>
            </section>

            <section class="section">
                <h2>3. Real-World Guide: Use Cases and Best Practices</h2>
                <p>Now that you understand the concepts, here is a practical guide on when to apply each tool.</p>
                
                <h3>Helper Functions</h3>
                <p><strong>Best Used For:</strong></p>
                <ul>
                    <li><strong>Pure Logic:</strong> Calculations (e.g., tax, discount), string formatting (e.g., <code>formatDate</code>), or regex validation.</li>
                    <li><strong>Shared Utilities:</strong> Code that is repeated across many files (e.g., <code>capitalizeName</code>).</li>
                </ul>

                <h3>Composition (Higher-Order Functions)</h3>
                <p><strong>Best Used For:</strong></p>
                <ul>
                    <li><strong>Cross-Cutting Concerns:</strong> Tasks that apply to <em>many</em> different functions, like Logging, Error Handling, or Performance Timing.</li>
                </ul>

                <h3>Composition (Object Wrapping)</h3>
                <p><strong>Best Used For:</strong></p>
                <ul>
                    <li><strong>Service Layers:</strong> Wrapping API clients or Database repositories.</li>
                    <li><strong>Feature Toggles:</strong> Swapping between a "Real" service and a "Test" or "Mock" service for testing.</li>
                </ul>
            </section>

            <section class="section">
                <h2>Quick Comparison</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Approach</th>
                                <th>What is it?</th>
                                <th>Best for...</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Helper Functions</strong></td>
                                <td>Calling a utility function explicitly.</td>
                                <td>Validation, formatting, calculations.</td>
                            </tr>
                            <tr>
                                <td><strong>Composition (HOF)</strong></td>
                                <td>Wrapping a function inside another function.</td>
                                <td>Logging, measuring speed (performance).</td>
                            </tr>
                            <tr>
                                <td><strong>Composition (Objects)</strong></td>
                                <td>Wrapping a class inside another class.</td>
                                <td>Caching, database connections, API calls.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>



        </article>

        <!-- Footer -->
        <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border); text-align: center; color: var(--muted); font-size: 0.9rem;">
            <p style="margin-bottom: 1rem;">&copy; 2025 Reza Owliaei. All rights reserved.</p>
            <a href="../index.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--muted); text-decoration: none; transition: color 0.2s ease;">
                <span>←</span>
                <span>Back to Blog</span>
            </a>
        </footer>
    </main>

    <!-- Prism.js Scripts for Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>

</body>
</html>